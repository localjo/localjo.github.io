<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.b4909afdbf42eed824c5.css">html{background:url(/static/balaton-sunset-5135baf4aea0e32595965ad277b19ef5.jpg) no-repeat 50% fixed;background-size:cover;background-color:#9da6ad;height:100%;box-sizing:border-box}

/*! modern-normalize | MIT License | https://github.com/sindresorhus/modern-normalize */*,:after,:before{box-sizing:inherit}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}hr{height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}</style><meta name="generator" content="Gatsby 2.20.29"/><link rel="icon" href="/favicon-32x32.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#AFB2B7"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=6059673d9e7456eb0e5bfd8f4c0b0d45"/><link rel="canonical" href="https://iamlocaljo.com/projects/react-tater/" data-baseprotocol="https:" data-basehost="iamlocaljo.com"/><title data-react-helmet="true">react-tater | Jo Sprague - Software Engineer</title><link data-react-helmet="true" rel="canonical" href="https://iamlocaljo.com/projects/react-tater/"/><meta data-react-helmet="true" name="description" content="A React plugin to add emoji markers and annotations to any element on a page. With algorithms for collision detection and finding nearest points."/><meta data-react-helmet="true" name="keywords" content="javascript, typescript, react, python, humanitarian"/><meta data-react-helmet="true" name="author" content="Jo Sprague"/><meta data-react-helmet="true" property="og:title" content="react-tater | Jo Sprague - Software Engineer"/><meta data-react-helmet="true" property="og:description" content="A React plugin to add emoji markers and annotations to any element on a page. With algorithms for collision detection and finding nearest points."/><meta data-react-helmet="true" property="og:image" content="https://iamlocaljo.com/social.png"/><meta data-react-helmet="true" property="og:url" content="https://iamlocaljo.com/projects/react-tater/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:title" content="Jo Sprague - Software Engineer"/><meta data-react-helmet="true" name="twitter:description" content="A React plugin to add emoji markers and annotations to any element on a page. With algorithms for collision detection and finding nearest points."/><meta data-react-helmet="true" name="twitter:image" content="https://iamlocaljo.com/social.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><link as="script" rel="preload" href="/webpack-runtime-3f7ef1d488148ff10ccc.js"/><link as="script" rel="preload" href="/framework-7656862d80676d58607a.js"/><link as="script" rel="preload" href="/app-c31b2245279c715efda4.js"/><link as="script" rel="preload" href="/styles-0dd9b16d06f2e4f550cc.js"/><link as="script" rel="preload" href="/7de215dc63366e4bdef7a9ba7ea7e114ad2fbd79-b750252c8a25b4fbec79.js"/><link as="script" rel="preload" href="/289c2ae6f183829e529eb9f8dede9c3704de7e64-f4283a4a64d63c405e29.js"/><link as="script" rel="preload" href="/20ef62b49c3797aef96a97894a8c9177aaffdf94-49eff2e7c97a6a985400.js"/><link as="script" rel="preload" href="/component---src-templates-project-tsx-76541ef48c7c3dd74c19.js"/><link as="fetch" rel="preload" href="/page-data/projects/react-tater/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1sc610g">html{box-sizing:border-box;}*,*::before,*::after{box-sizing:inherit;}html{font-size:16px !important;line-height:1.45 !important;}body{width:100%;overflow-x:hidden;overflow-y:scroll;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif;color:#000;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}a{color:#663399;-webkit-text-decoration:none;text-decoration:none;}a:hover,a:focus{-webkit-text-decoration:underline;text-decoration:underline;}img{max-width:100%;object-fit:contain;position:relative;}figure{margin:2rem 0;}figcaption{font-size:80%;}table{width:100%;margin-bottom:1rem;border:1px solid #ccc;font-size:85%;border-collapse:collapse;}td,th{padding:.25rem .5rem;border:1px solid #ccc;}th{text-align:left;}tbody tr:nth-of-type(odd) td{background-color:rgba(255,255,255,0.1);}tbody tr:nth-of-type(odd) tr{background-color:rgba(255,255,255,0.1);}h1,h2,h3,h4,h5,h6{margin-top:1.414rem;margin-bottom:.5rem;color:#000;font-weight:600;line-height:1.2;text-rendering:optimizeLegibility;}h1{margin-top:0;font-size:2.441rem;}h2{font-size:1.953rem;}h3{font-size:1.563rem;}h4,h5,h6{font-size:1.25rem;}p{margin-top:0;margin-bottom:1rem;}strong{color:#000;}ul,ol,dl{margin-top:0;margin-bottom:1rem;}dt{font-weight:bold;}dd{margin-bottom:.5rem;}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #ccc;}blockquote{margin:.8rem 0;padding:.5rem 1rem;border-left:.25rem solid #ccc;color:#999;}blockquote p:last-child{margin-bottom:0;}@media (min-width:48em){blockquote{padding-right:5rem;padding-left:1.25rem;}}</style><style data-emotion-css="1mbwsz5">.css-1mbwsz5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;height:100vh;overflow-y:hidden;}</style><div class="css-1mbwsz5 ecyhpo80"><style data-emotion-css="b95f0i">.css-b95f0i{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1;-ms-flex:1;flex:1;}</style><main class="css-b95f0i er0a0bc0"><style data-emotion-css="pcbh56">.css-pcbh56{display:block;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;padding:1.5rem;margin-bottom:3rem;}</style><div class="css-pcbh56 e1qzbkmr0"><style data-emotion-css="i9ubom">.css-i9ubom{opacity:0.9;position:relative;margin-left:auto;margin-right:auto;width:auto;max-height:90vh;overflow:scroll;background:rgb(30,34,41);color:#fff;box-shadow:rgba(0,0,0,0.1) 1px 1px,rgba(0,0,0,0.1) -1px -1px,rgba(0,0,0,0.1) 1px -1px,rgba(0,0,0,0.1) -1px 1px,rgba(0,0,0,0.8) 0 0 70px;border-radius:5px;}</style><div style="max-width:960px" class="css-i9ubom e8f1yz10"><style data-emotion-css="1iuiomm">.css-1iuiomm{background:rgb(30,34,41);position:-webkit-sticky;position:sticky;top:0;z-index:100;text-align:center;padding:0 10px 0 76px;}.css-1iuiomm p{font-size:12px;font-weight:500;color:#ccc;padding:8px 0 8px 0;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}</style><div aria-hidden="true" class="css-1iuiomm e8f1yz11"><style data-emotion-css="1n532iq">.css-1n532iq{position:absolute;top:0;left:0;line-height:12px;padding:0;}.css-1n532iq span{display:inline-block;width:12px;height:12px;margin:10px 0 0 10px;border-radius:6px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#ccc;background-repeat:no-repeat;background-position:center center;background-size:8px;border:none;padding:0;}.css-1n532iq span.green{background-color:rgb(99,199,86);}.css-1n532iq span.yellow{background-color:rgb(246,193,81);}.css-1n532iq span.red{background-color:rgb(236,97,86);}.css-1n532iq:hover span.green{background-image:url(/fullscreen-button.svg);}.css-1n532iq:hover span.yellow{background-image:url(/minimize-button.svg);}.css-1n532iq:hover span.red{background-image:url(/close-button.svg);}</style><div class="css-1n532iq e8f1yz12"><span class="red"></span><span class="yellow"></span><span class="green"></span></div><p title=""></p></div><style data-emotion-css="57akl">.css-57akl{padding:15px 15px 5px 15px;font-family:'Fira Code',Menlo,Monaco,'Courier New',monospace;font-size:16px;line-height:1.5em;min-height:600px;color:#ccc;}.css-57akl h1,.css-57akl h2,.css-57akl h3,.css-57akl h4,.css-57akl h5,.css-57akl h6,.css-57akl small,.css-57akl strong,.css-57akl b,.css-57akl em,.css-57akl p{font-size:inherit;color:inherit;margin-bottom:16px;}.css-57akl h1,.css-57akl h2,.css-57akl h3,.css-57akl h4,.css-57akl h5,.css-57akl h6,.css-57akl strong,.css-57akl b{font-weight:bold;}.css-57akl hr{border-style:dashed;}.css-57akl small{opacity:0.5;}.css-57akl .badge{white-space:nowrap;background:#ccc;color:rgb(30,34,41);font-style:normal;-webkit-text-decoration:none;text-decoration:none;display:inline-block;padding:0 0.4em;margin:0 0.1em 0.6em 0;}.css-57akl .badge.yellow,.css-57akl .badge.javascript,.css-57akl .badge.es6,.css-57akl .badge.babel,.css-57akl .badge.es5{background:rgba(241,217,29,0.8);}.css-57akl .badge.blue,.css-57akl .badge.wordpress,.css-57akl .badge.typescript,.css-57akl .badge.webpack,.css-57akl .badge.python,.css-57akl .badge.jquery,.css-57akl .badge.mapbox,.css-57akl .badge.lodash,.css-57akl .badge.nasagibsapi,.css-57akl .badge.docker,.css-57akl .badge.css{background:rgba(24,122,191,0.8);}.css-57akl .badge.teal,.css-57akl .badge.react,.css-57akl .badge.openlayers,.css-57akl .badge.express,.css-57akl .badge.reacthooks{background:rgba(94,211,243,0.8);}.css-57akl .badge.purple,.css-57akl .badge.php,.css-57akl .badge.eslint,.css-57akl .badge.preact{background:rgba(166,121,210,0.8);}.css-57akl .badge.green,.css-57akl .badge.openstreetmapapi{background:rgba(104,159,99,0.8);}.css-57akl .badge.pink,.css-57akl .badge.seleniumwebdriver,.css-57akl .badge.sass{background:rgba(229,53,171,0.8);}.css-57akl .badge.red,.css-57akl .badge.jest{background:rgba(212,69,62,0.8);}.css-57akl .badge.orange,.css-57akl .badge.browserstack,.css-57akl .badge.html{background:rgba(243,118,65,0.8);}.css-57akl .emoji{text-indent:-2em;margin-left:2em;}@media (min-width:48em){.css-57akl .columns{-webkit-columns:2;columns:2;}}.css-57akl ul,.css-57akl .section{margin:0;-webkit-column-break-inside:avoid;page-break-inside:avoid;-webkit-break-inside:avoid-column;break-inside:avoid-column;display:table;}.css-57akl ul{list-style:none;margin:0;padding:0;}.css-57akl ul li{margin:0;padding:0;}.css-57akl ul li:before{content:'¬ª';padding-right:0.5em;}.css-57akl code,.css-57akl pre{color:rgb(254,125,232);margin:0;padding:0;line-height:1.1em;}.css-57akl a{color:#ccc;-webkit-text-decoration:underline;text-decoration:underline;}.css-57akl a:hover{background:#ccc;color:rgb(30,34,41);}.css-57akl table{font-size:16px;border:none;}.css-57akl table th,.css-57akl table td{vertical-align:top;padding:10px;border:none;}.css-57akl .tile-list{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;}.css-57akl .tile{background:rgba(255,255,255,0.1);padding:15px;margin-bottom:15px;width:100%;min-width:450px;}.css-57akl .tile p{max-width:100%;}@media (min-width:62em){.css-57akl .tile{max-width:49%;}}@media (min-width:92.5em){.css-57akl .tile{max-width:32.5%;}}.css-57akl .project h2{margin:0 0 1em 0;}.css-57akl .project p:nth-of-type(2){clear:both;}.css-57akl .project p:nth-of-type(1){float:left;width:245px;max-height:160px;overflow:hidden;}.css-57akl .project h3:nth-of-type(1){padding-left:15px;overflow:hidden;}.css-57akl .project ul:nth-of-type(1){padding-left:15px;}.css-57akl .project ul:nth-of-type(1) li:before{content:'';padding:0;}.css-57akl .project h3:nth-of-type(2){display:none;}.css-57akl .project ul:nth-of-type(2){clear:both;}.css-57akl .project ul:nth-of-type(2) li{display:inline-block;}.css-57akl .project ul:nth-of-type(2) li:before{content:'';padding:0;}.css-57akl .experience h3{padding:10px;background:rgba(255,255,255,0.1);}.css-57akl .experience a{color:rgb(24,122,191);}.css-57akl .experience p > em,.css-57akl .experience p > i{color:rgba(255,255,255,0.5);}.css-57akl .experience p > em a,.css-57akl .experience p > i a{color:rgb(30,34,41);background:rgb(24,122,191);font-style:normal;padding:0 0.3em;}.css-57akl .experience p{padding:0 0 0 10px;}.css-57akl .experience ul{position:relative;margin:0 auto;max-width:80%;}.css-57akl .experience ul li{margin-bottom:1em;}.css-57akl .experience ul li:before{position:absolute;right:100%;}.css-57akl .experience pre{margin-bottom:2em;}@media (min-width:36em){.css-57akl .experience pre{float:left;margin:0 2em 2em 0;}}</style><div class="terminal-main css-57akl e8f1yz13"><style data-emotion-css="18zm33v">.css-18zm33v{overflow:scroll;overflow-x:hidden;}</style><div class="css-18zm33v e8f1yz14"><div class="responsive-ascii" title="react-tater" aria-label="react-tater"><h1>react-tater</h1><pre style="font-size:100px;position:absolute;visibility:hidden">¬†</pre></div><blockquote>A React plugin to add emoji markers and annotations to any element on a page. With algorithms for collision detection and finding nearest points.</blockquote><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:28.756476683937823%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA90lEQVQY042PMU+DQBzF72uqH4HBhgYSbRxhYLADC0G2yurg4GhI6sVrujj5BQwdjEZz0HIH3L1yNJJoJPqSX27553fvEbHNsWIUy+UDKKVgjCHLMuT5BmNRSn1Daz1A3jcM52dTzGYXsG0blmXh6PgEd7c3eH6iiK8SXC8WSJIEURQhTdNeMhYipIbv+3AcB67rYtpJTycTrFePWNN7XM7niOMYQRDA8zyEYYiqqiClhBBieA3mI6K1GpkF1M1hzs9GZVn+Stu2IOZgt31FXZf9sRGYNE0Fzj9QFEUP53zgTyH/fOmqfwkPbZR8g9x11G0/6z+YJXsTprV8fPZ5pQAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/244cf9fd6a7517f05e2fa38624c5b76a/8787c/react-tater-screenshot.png 386w,
/static/244cf9fd6a7517f05e2fa38624c5b76a/c0886/react-tater-screenshot.png 772w,
/static/244cf9fd6a7517f05e2fa38624c5b76a/c05a1/react-tater-screenshot.png 782w" sizes="(max-width: 782px) 100vw, 782px" /><img loading="lazy" sizes="(max-width: 782px) 100vw, 782px" srcset="/static/244cf9fd6a7517f05e2fa38624c5b76a/8787c/react-tater-screenshot.png 386w,
/static/244cf9fd6a7517f05e2fa38624c5b76a/c0886/react-tater-screenshot.png 772w,
/static/244cf9fd6a7517f05e2fa38624c5b76a/c05a1/react-tater-screenshot.png 782w" src="/static/244cf9fd6a7517f05e2fa38624c5b76a/c05a1/react-tater-screenshot.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><br/><p><span><span class="badge javascript">JavaScript</span> </span><span><span class="badge react">React</span> </span><span><span class="badge reacthooks">React Hooks</span> </span><span><span class="badge jest">Jest</span> </span><span><span class="badge createreactlibrary">create-react-library</span> </span><span><span class="badge styledcomponents">styled-components</span> </span><span><span class="badge unicodeemoji">Unicode Emoji</span> </span><span><span class="badge collisiondetection">Collision Detection</span> </span></p><hr/><style data-emotion-css="1ujtelj">.css-1ujtelj{position:relative;}.css-1ujtelj .gatsby-resp-image-figcaption{text-align:center;}.css-1ujtelj #quotable-toolbar .quotable-link{color:rgb(30,34,41) !important;}</style><div class="blog-post css-1ujtelj e14kosvp0"><h2>Project History</h2>
<p>This project started as my submission to a <a href="https://github.com/graphy-engineering/graphy-react-challenge">coding challenge</a>. The challenge was to add the ability to add annotations to a demo React app. I decided to create a solution as a reusable React module that could be installed in any React project, and when I <a href="https://github.com/localjo/react-tater">published my solution on GitHub</a>, it got over 200 stars overnight, so I decided to maintain it as an open source project.</p>
<p>I named the library ‚ÄúTater‚Äù as a fun play on the words ‚Äúannotator‚Äù and ‚Äúpotato‚Äù. I had a lot of fun adding potatoes to web pages while testing it. ü•î There is <a href="https://iamlocaljo.com/react-tater-demo/">a live demo of this library with an interactive tour</a> where you can add potatoes to the page or take a tour that explains how Tater works.</p>
<h2>Technical Details</h2>
<p>I made a number of technical choices while building this library that are worth explaining:</p>
<ol>
<li>
<p><strong>Standalone React Library</strong></p>
<p>Annotations are a good candidate for abstraction because the functionality
isn‚Äôt dependent on the app it‚Äôs a part of, so I decided to abstract my
solution into <a href="https://github.com/localjo/react-tater/">it‚Äôs own library</a>
that can be reused easily to add annotation functionality to any app.</p>
</li>
<li>
<p><strong>Grid and Collision Detection</strong></p>
<p>My solution for handling markers that overlap was to make sure that they‚Äôre
not overlapping in the first place. I did this by implementing <a href="https://github.com/localjo/react-tater/blob/master/src/position.js#L1-L9">a collision detection algorithm</a>
and <a href="https://github.com/localjo/react-tater/blob/master/src/position.js#L92-L111">a placement algorithm</a>
that <a href="https://github.com/localjo/react-tater/blob/master/src/position.js#L34">uses the Pythagorean Theorem</a>
to reposition markers that collide into the nearest open space on a dynamic
grid. The grid is invisible but <a href="https://github.com/localjo/react-tater/blob/master/src/index.js#L38">can be enabled in development</a>
to debug the implementation:</p>
<p><img src="./dynamic-placement-grid.png" alt="Grid Placement Algorithm"></p>
</li>
<li>
<p><strong>Using Emoji for Markers</strong></p>
<p>I chose to use emoji for the markers because they‚Äôre familiar, fun and
friendly. Browser support for emoji has improved and most modern browsers on
macOS, Windows, Android and iOS support them, but getting the implementation
right was a challenge. I thought I could just type the emoji characters
directly in my code, but Babel didn‚Äôt like that and threw errors in many
cases:</p>
<p><img src="./babel-potato-error.png" alt="Babel Emoji Syntax Error"></p>
<p>My solution was to store <a href="https://github.com/localjo/react-tater/blob/master/src/emojis.js#L60">emoji as an array of Unicode Code Points</a>
and <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L260">decode them for display</a>.
But that wasn‚Äôt the complete solution, because I also ran into <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1608548">problems with Firefox not displaying Keycap Digit emoji correctly</a>.
To solve that, I used CSS to <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L20">manually set an emoji font</a>
for the markers. This solution may need more testing on different browsers
and operating systems.</p>
</li>
<li>
<p><strong>Demo App Dependencies</strong></p>
<p>Most of my focus was on building the Tater library. In this repo my goal was
just to set up a nice looking page to demonstrate the library. I used <a href="https://material-ui.com/"><code class="language-text">material-ui</code></a>
to set up some quick demo components without wasting too much time on them.
I don‚Äôt consider this as a dependency of my solution, since my library works
in any React app regardless of what UI library it might use. Tater itself
doesn‚Äôt use any <code class="language-text">material-ui</code> components.</p>
</li>
<li>
<p><strong>Unit Tests</strong></p>
<p>I wrote some <a href="https://github.com/localjo/react-tater/blob/master/src/position.test.js">unit tests for the positioning functions</a>
in my library. This made it much easier to reason about the code for those
functions since I could run the tests in watch mode while developing to
check my logic. Running the tests in watch mode also gave me confidence
that I wasn‚Äôt breaking the underlying positioning functionality while
making other changes to the library or refactoring code.</p>
</li>
</ol>
<h2>Trade-offs and things left out</h2>
<ol>
<li>
<p><strong>Responsive Layout and Percentage Coordinates</strong></p>
<p>Early on in developing my solution, I decided that I wanted annotations to
work even if the annotated element‚Äôs size changed. This has the advantage of
working with responsive layouts. To achieve this, I decided to use percentage
values to store the <code class="language-text">x</code> and <code class="language-text">y</code> coordinates instead of pixel values. The
trade-off is a little bit of loss of precision and while it works well for
simple rectangles, it doesn‚Äôt work quite as well with elements that don‚Äôt
scale linearly or have children with changing ratios, as markers sometimes
end up placed differently than a user might expect.</p>
</li>
<li>
<p><strong>Browser/OS Compatibility</strong></p>
<p>Given the amount of time and resources I dedicated to this, the number of
browsers I was able to test in is somewhat limited. I tested on macOS
Catalina and Windows 10 in the latest versions of Firefox and Chrome. More
extensive testing could be done using BrowserStack to test different browsers
and operating systems. While I considered responsive layouts, I didn‚Äôt test
this on mobile devices so its mobile functionality might be limited.</p>
</li>
<li>
<p><strong>Dependencies and File Size</strong></p>
<p>While I tried not to use unneeded dependencies, I didn‚Äôt measure my build‚Äôs
file size. Towards the end of the project, when publishing it, I noticed a
warning about the demo app‚Äôs bundle size of 275KiB exceeding the recommended
limit of 244KiB. While a lot of that file size comes from <code class="language-text">material-ui</code> and
not from my solution, it would be good to consider the impacts of file size
on performance especially for a reusable library that might be installed
in other apps.</p>
</li>
</ol>
<h2>What I might change</h2>
<p>If I were going to start over with this challenge, here‚Äôs what I might do differently:</p>
<ol>
<li>
<p><strong>Use a Flux Data Store</strong></p>
<p>I originally built my solution without Redux or any other library for
managing state. This was partly because I wanted to avoid adding
dependencies, and partly because I didn‚Äôt think the state I needed to manage
would be very complex. But I ran into a problem when I tested my solution
with a real user: tooltips in edit mode or the icon picker didn‚Äôt close
automatically when the user clicked outside of them, leading to a mess of
editing tooltips open at the same time if the user wasn‚Äôt careful.</p>
<p>Making the tooltips close when a user clicked outside of them proved to be a
challenge since each marker component manages it‚Äôs own state, and doesn‚Äôt
receive events that happen in siblings and parents. The first solution I
thought of was to make each tooltip close whenever a <code class="language-text">blur</code> event happened
(the user clicked outside of the tooltip). I thought this would be
a quick and easy solution, but then to make sure that the <code class="language-text">blur</code> event
happened, I had to add a <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L263">hidden textarea element</a>
inside each tooltip, <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L184-L205">some timeouts</a>
to make sure that clicks still got handled correctly and <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L107-L114">a state management trick</a>
to handle blur events.</p>
<p>A better solution would have been to hoist the state management for the
tooltips to the parent and consider using <a href="https://facebook.github.io/flux/">a Flux pattern</a>
and maybe a library like Redux to manage the state of the entire annotator.
A Flux pattern also would have helped me create a consistent internal API
for changing markers‚Äô emoji, text, position and pin state instead of writing
a different updater function for each of those changes.</p>
</li>
<li>
<p><strong>Remove <code class="language-text">styled-components</code></strong></p>
<p>I started my solution using <code class="language-text">styled-components</code> since it was contained in
the starter repo for the coding challenge. In the end, since there weren‚Äôt many components
to be styled, I could have done the styling using React inline<code class="language-text">style</code>
attributes to avoid the extra dependency. The advantage would be that my
solution wouldn‚Äôt have any dependencies then, and would be more lightweight.
The downside would be slightly more complex syntax and more work to support
cross-browser CSS, but the performance benefits might be worth it.</p>
</li>
<li>
<p><strong>Better Emoji Selection</strong></p>
<p>The <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L248-L274">emoji picker I built</a>
only allows for a selection from a limited set of emoji that I manually
added. In the future, I could develop a full-featured emoji picker that uses
Unicode ranges to allow picking from all possible emoji and quickly
searching for emoji based on name.</p>
</li>
<li>
<p><strong>Improved Support for Tours</strong></p>
<p>I added a simple tour in the demo app, that shows the features of Tater
itself. I think there is a lot of potential to expand that functionality
and add support for building full-featured tours of an app. This could be
done by adding event handlers to the markers that progress through the tour
when users perform certain actions. For example, opening the next tooltip in
a tour with something like; <code class="language-text">onTooltipSave: ()=&gt;openTooltip(tooltipId)</code>.</p>
</li>
<li>
<p><strong>Fix Memory Leak</strong></p>
<p>When removing a marker from the page, there is a warning in the browser
console about removing a React element without cleaning up all of it‚Äôs
event listeners, which could lead to a memory leak over time if a user
adds and removes a lot of annotations without refreshing the page. I didn‚Äôt
have time to investigate the cause of this yet.</p>
</li>
<li>
<p><strong>Add Test Coverage</strong></p>
<p>I only added tests for the marker positioning functions, but there are more
parts of the code that it would be worth adding tests to, specifically <a href="https://github.com/localjo/react-tater/blob/master/src/marker.js#L102-L138">the
marker‚Äôs state reducer</a>.</p>
</li>
<li>
<p><strong>Split Large Components into Smaller Parts</strong></p>
<p>As my solution evolved, some components grew to be quite large. The code
organization could be improved by splitting out different parts of existing
components into their own components. For example, there are three
<code class="language-text">&lt;Tooltip&gt;</code> components inside the <code class="language-text">&lt;Mark&gt;</code> component that could be split
out into their own files. Abstracting some of the reused components would
help make things more testable and easier to reason about.</p>
</li>
</ol></div><hr/><h2 id="#project-links">Project links:</h2><p><span><a class="badge green" href="https://iamlocaljo.com/react-tater-demo/" target="_blank">Live Demo</a> </span><span><a class="badge red" href="https://www.npmjs.com/package/react-tater" target="_blank">NPM Package</a> </span></p><hr/><p>Thank you for reading about this project. Please<!-- --> <a href="mailto:josiah.sprague@gmail.com?subject=Your%20post:%20react-tater&amp;body=I%20am%20writing%20this%20email%20about%20your%20project:%20undefined%0A%0AHere%20are%20my%20comments:%0A%0A">send an email with your comments to <!-- -->josiah.sprague@gmail.com</a>.</p></div><style data-emotion-css="hc2xjd">.css-hc2xjd{background:rgb(30,34,41);padding:10px 0;position:-webkit-sticky;position:sticky;bottom:-1px;}.css-hc2xjd[stuck]{padding:10px 0 9px 0;}.css-hc2xjd[stuck]:before{position:absolute;bottom:100%;height:60px;width:100%;content:'';background:linear-gradient(to top,rgb(30,34,41) 50%,rgba(30,34,41,0) 100%);pointer-events:none;}.css-hc2xjd[stuck]:after{position:absolute;bottom:100%;width:100%;content:'-- scroll down --';text-align:left;color:rgb(30,34,41);background:#808080;pointer-events:none;}.css-hc2xjd ul.ls{list-style:none;margin-left:0;padding-left:0;}.css-hc2xjd ul.ls li{display:inline-block;margin-right:2em;margin-bottom:1em;margin-left:0;padding-left:0;}.css-hc2xjd ul.ls li:before{content:'';}.css-hc2xjd .tip{display:none;}@media (max-width:36em){.css-hc2xjd ul.ls li{display:block;}.css-hc2xjd .tip{display:inline;}}.css-hc2xjd .prompt{min-height:2em;}.css-hc2xjd .prompt input{font-size:16px;text-align:left;box-sizing:content-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border:none;border-right:0.8em solid;margin-right:0.2em;text-shadow:0 0 0 #ccc;color:transparent;}.css-hc2xjd .prompt input:focus{overflow:hidden;white-space:nowrap;padding-right:0;display:inline-block;outline:none;-webkit-animation:blink-caret 1.2s step-end infinite;animation:blink-caret 1.2s step-end infinite;}@-webkit-keyframes blink-caret{from,to{border-right-color:transparent;}50%{border-right-color:#ccc;}}@keyframes blink-caret{from,to{border-right-color:transparent;}50%{border-right-color:#ccc;}}</style><div class="css-hc2xjd e8f1yz15"><p aria-label="Toggle navigation">&gt; nav </p><ul class="ls"><li><a class="badge" href="/">/<!-- -->Home</a></li><li><a class="" href="/code-demos/">/<!-- -->Code Demos</a></li><li><a class="" href="/contact/">/<!-- -->Contact</a></li><li><a class="" href="/experience/">/<!-- -->Experience</a></li><li><a class="" href="/open-source">/<!-- -->Open Source</a></li><li><a class="" href="/other-profiles/">/<!-- -->Other Profiles</a></li><li><a class="" href="/technologies/">/<!-- -->Technologies</a></li><li><a class="" href="/travel-blog">/<!-- -->Travel Blog</a></li></ul></div></div></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
    (function(f, a, t, h, o, m){
      a[h]=a[h]||function(){
        (a[h].q=a[h].q||[]).push(arguments)
      };
      o=f.createElement('script'),
      m=f.getElementsByTagName('script')[0];
      o.async=1; o.src=t; o.id='fathom-script';
      m.parentNode.insertBefore(o,m)
    })(document, window, '//cdn.usefathom.com/tracker.js', 'fathom');
    fathom('set', 'siteId', 'NACYXQJM');
  </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/projects/react-tater/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-c31b2245279c715efda4.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-0eefb2092d535e2a0e88.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-7b982d85aa99addef19d.js"],"component---src-pages-ascii-tsx":["/component---src-pages-ascii-tsx-caefc30471105336bfd0.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-ec8d9f96d840113d608e.js"],"component---src-pages-open-source-tsx":["/component---src-pages-open-source-tsx-61572f2967e212f1cf7b.js"],"component---src-pages-tech-blog-tsx":["/component---src-pages-tech-blog-tsx-94ab2c16917775d16993.js"],"component---src-pages-travel-blog-tsx":["/component---src-pages-travel-blog-tsx-ba8c93d3f802880c877f.js"],"component---src-templates-blog-tsx":["/component---src-templates-blog-tsx-fbc697afbf52154cb459.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-6eab520f6adcbea4744e.js"],"component---src-templates-project-tsx":["/component---src-templates-project-tsx-76541ef48c7c3dd74c19.js"]};/*]]>*/</script><script src="/component---src-templates-project-tsx-76541ef48c7c3dd74c19.js" async=""></script><script src="/20ef62b49c3797aef96a97894a8c9177aaffdf94-49eff2e7c97a6a985400.js" async=""></script><script src="/289c2ae6f183829e529eb9f8dede9c3704de7e64-f4283a4a64d63c405e29.js" async=""></script><script src="/7de215dc63366e4bdef7a9ba7ea7e114ad2fbd79-b750252c8a25b4fbec79.js" async=""></script><script src="/styles-0dd9b16d06f2e4f550cc.js" async=""></script><script src="/app-c31b2245279c715efda4.js" async=""></script><script src="/framework-7656862d80676d58607a.js" async=""></script><script src="/webpack-runtime-3f7ef1d488148ff10ccc.js" async=""></script></body></html>